# サイズ調整の問題と修正

## 🐛 問題の原因

### 現象
- Roblox Studioで細長いフォルム（Size: 8, 1, 1）に設定
- プレイ時には正方形（立方体）になってしまう

### 原因

以前のコードでは、サイズ調整時に以下の処理をしていました：

```lua
-- 問題のあるコード
local initialSize = part.Size.X  -- X軸のサイズだけを取得
part.Size = Vector3.new(initialSize, initialSize, initialSize) * self.size
```

**問題点**:
- X軸のサイズ（8）だけを取得
- すべての軸（X, Y, Z）に同じ値（8）を適用
- 結果: (8, 8, 8) になってしまう（正方形）

**正しい動作**:
- 各軸の初期サイズを個別に保存: (8, 1, 1)
- 各軸に同じスケールを適用: (8×1.0, 1×1.0, 1×1.0) = (8, 1, 1)
- 比率が保持される

## ✅ 修正内容

### 修正後のコード

```lua
-- 各軸のサイズを個別に保存
part:SetAttribute("InitialSizeX", part.Size.X)  -- 8
part:SetAttribute("InitialSizeY", part.Size.Y)  -- 1
part:SetAttribute("InitialSizeZ", part.Size.Z)  -- 1

-- 各軸の比率を保持してスケール
part.Size = Vector3.new(
    initialSizeX * self.size,  -- 8 × 1.0 = 8
    initialSizeY * self.size,  -- 1 × 1.0 = 1
    initialSizeZ * self.size   -- 1 × 1.0 = 1
)
```

### 動作例

**初期サイズ**: (8, 1, 1) - 細長い形状

**サイズ1.0の場合**:
- (8 × 1.0, 1 × 1.0, 1 × 1.0) = (8, 1, 1) ✅ 細長い形状を保持

**サイズ2.0の場合**:
- (8 × 2.0, 1 × 2.0, 1 × 2.0) = (16, 2, 2) ✅ 細長い形状を保持（2倍に拡大）

**サイズ0.5の場合**:
- (8 × 0.5, 1 × 0.5, 1 × 0.5) = (4, 0.5, 0.5) ✅ 細長い形状を保持（半分に縮小）

## 📚 理論的な説明

### Vector3とは？

Vector3は、3D空間の3つの軸（X, Y, Z）の値を保持するデータ型です。

```
Vector3.new(X, Y, Z)
```

- **X軸**: 左右の方向
- **Y軸**: 上下の方向
- **Z軸**: 前後の方向

### サイズ調整の原則

**正しい方法**:
1. 各軸の初期サイズを個別に保存
2. 各軸に同じスケール係数を適用
3. 比率が保持される

**間違った方法**:
1. 1つの軸のサイズだけを取得
2. すべての軸に同じ値を適用
3. 比率が失われる（正方形になる）

### 例え話

**正しい方法**:
- 初期: 長方形（縦8cm、横1cm）
- 2倍に拡大: 長方形（縦16cm、横2cm）✅ 形状が保持される

**間違った方法**:
- 初期: 長方形（縦8cm、横1cm）
- 2倍に拡大: 正方形（縦8cm、横8cm）❌ 形状が失われる

## 🧪 動作確認

修正後、以下を確認してください：

1. **ファイルを保存**
   - 変更がRojoで自動的に同期されることを確認

2. **ゲームを実行**
   - 「Play」ボタンをクリック
   - Outputウィンドウでエラーがないことを確認

3. **プレイヤーを確認**
   - プレイヤーが細長い形状を保持していることを確認
   - サイズが変更されても、形状の比率が保持されることを確認

## 💡 まとめ

- **問題**: 1つの軸のサイズだけを使用していた
- **解決**: 各軸のサイズを個別に保存・適用
- **結果**: 形状の比率が保持される

この修正により、細長い形状が正しく保持されるようになります！

